<!-- 📦 Contact Modals -->
<c-modal #editContactModal [scrollable]="true" alignment="center" id="editContactModal">
  <app-edit-contact-modal [contactToEdit]="selectedContact"  (contactUpdated)="refreshContactList()"></app-edit-contact-modal>
</c-modal>


<c-modal #verticallyCenteredScrollableModal [scrollable]="true" alignment="center" id="verticallyCenteredScrollableModal">
  <app-add-contact-modal (contactAdded)="ContactList()"></app-add-contact-modal>
</c-modal>



<c-modal
  #exportContactModal
  [scrollable]="true"
  alignment="center"
  id="exportContactModal"
>
  <app-export-contact-modal
    (exportCSV)="exportAsCSV()"
    (exportVCard)="exportAsVCard()"
     (closeModal)="exportContactModal.visible = false" 
  ></app-export-contact-modal>
</c-modal>







<!-- 🧾 Contact List Section -->
<c-col xs="12">
  <c-card class="mb-4">
    <c-card-header class="d-flex justify-content-between align-items-center">
      <strong class="fs-5">Contact List</strong>

      <div class="d-grid gap-3 d-md-flex justify-content-md-end">
        <button class="btn btn-primary btn-sm px-3 py-1 text-nowrap" [cModalToggle]="verticallyCenteredScrollableModal.id">
          Add Contact
        </button>
        <button class="btn btn-success btn-sm px-3 py-1 text-nowrap text-white">
          <i class="fas fa-file-import me-1 text-white"></i> Import
        </button>


     <button
  class="btn btn-secondary btn-sm px-3 py-1 text-nowrap"
  [cModalToggle]="exportContactModal.id"
>
  <i class="fas fa-file-export me-1"></i> Export
</button>


      </div>
    </c-card-header>

    <c-card-body>





      <!-- 🔍 Search Filters -->
      <div class="d-flex justify-content-start align-items-center mb-4 flex-wrap gap-2">
        <input type="text" class="form-control form-control-sm" style="max-width: 210px"  [(ngModel)]="name"  placeholder="🔍 Search by Name" (input)="FilterContact()"  (click)="FilterContact()"/>
        <!-- <span class="input-group-text" (click)="FilterContact()"></span> -->

        <input type="text" class="form-control form-control-sm" style="max-width: 210px"   [(ngModel)]="phonenumber" placeholder="📞 Search by Phone Number"  (input)="FilterContact()" (click)="FilterContact()"/>
        <!-- <span class="input-group-text" (click)="FilterContact()"><i class="fas fa-search"></i></span> -->


<div class="input-group input-group-sm" style="max-width: 210px;">
  <input
    type="text"
    class="form-control"
    [(ngModel)]="email"
    placeholder="✉️ Search by Email"
    (input)="FilterContact()"
  />
  <button
    class="input-group-text btn btn-light"
    (click)="FilterContact()"
    type="button"
  >
    <i class="fas fa-search"></i>
  </button>
</div>






        <button type="button" class="btn btn-danger btn-sm text-white" title="Reset" (click)="ResetFilters()">
  <i class="fas fa-arrows-rotate"></i>
</button>

      </div>

      <!-- 📱 Responsive Table Container -->
      <div *ngIf="isLoading" class="d-flex justify-content-center my-5">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div *ngIf="!isLoading" class="table-responsive">
  <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Email</th>
              <th scope="col">Edit</th>
            </tr>
          </thead>
          <tbody>
            

         <tr *ngFor="let contact of contacts; let i = index">
              <td>{{ (currentPage * itemsPerPage) + (i + 1) }}</td>
              <td>{{ contact.name }}</td>
              <td>{{ contact.contact }}</td>
              <td>{{ contact.mail }}</td>
              <td>
               <button
  class="btn btn-sm btn-outline-primary"
  title="Edit"
  [cModalToggle]="editContactModal.id"
  (click)="openEditModal(contact)"
>
  <i class="fas fa-pen"></i>
</button>

              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Pagination Component -->
      <app-pagination
        *ngIf="!isLoading"
        [totalItems]="totalItems"
        [itemsPerPage]="itemsPerPage" 
        [currentPage]="currentPage"
        (pageChange)="onPageChange($event)"
        (itemsPerPageChange)="itemsPerPage = $event; onPageChange(1)">
      </app-pagination>
    </c-card-body>
  </c-card>
</c-col>