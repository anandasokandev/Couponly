<c-modal #aiImageModal [scrollable]="true" alignment="center" id="aiImageModal" class="wide-modal">

  <c-modal-header>
    <h5 cModalTitle>Generate AI Coupon</h5>
    <button cButtonClose cModalToggle></button>
  </c-modal-header>

  <c-modal-body class="p-4">

    <c-card class="mb-2" [class.border-primary]="generationMethod === 'prompt'">
      <c-card-header>
        <c-form-check>
          <input cFormCheckInput type="radio" name="generationType" id="promptRadio" value="prompt"
            [(ngModel)]="generationMethod" >
          <label cFormCheckLabel for="promptRadio" class="fw-bold" style="cursor: pointer;">
            Generate using Prompt
          </label>
        </c-form-check>
      </c-card-header>

      <c-card-body *ngIf="generationMethod === 'prompt'">
        <label cFormLabel for="promptInput">Enter your prompt:</label>
        <c-input-group class="pt-2">
          <input cFormControl id="promptInput" placeholder="e.g., 'A modern sneaker on a bright background'"
            aria-label="AI prompt" #promptInput />
          <button cButton type="button" color="primary" (click)="generateImage(promptInput.value)">Generate</button>
        </c-input-group>
      </c-card-body>
    </c-card>

    <c-card [class.border-primary]="generationMethod === 'default'">
      <c-card-header>
        <c-form-check>
          <input cFormCheckInput type="radio" name="generationType" id="defaultRadio" value="default"
            [(ngModel)]="generationMethod">
          <label cFormCheckLabel for="defaultRadio" class="fw-bold" style="cursor: pointer;">
            Generate using Default Keyword
          </label>
        </c-form-check>
      </c-card-header>

      <c-card-body *ngIf="generationMethod === 'default'">
        <p class="text-muted mb-2">
          This will generate an image based on the default keyword (e.g., "Shoes").
        </p>
        <button cButton type="button" color="primary" (click)="generateImage('null')">Generate Default</button>
      </c-card-body>
    </c-card>

    <hr>

    <c-row class="mt-3">

      <c-col md="6">
        <h5>Preview</h5>
        <div class="text-center p-3 border rounded bg-light position-relative"
          style="min-height: 250px; display: grid; place-items: center;">
      
          <!-- Loading Animation -->
          <div *ngIf="isGenerating" class="loading-overlay">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2">Generating image...</p>
          </div>
      
          <!-- Image Preview -->
          <img *ngIf="!isGenerating && generatedCouponUrl" [src]="generatedCouponUrl" alt="Generated Coupon Image"
            class="img-fluid rounded">
        </div>
      
      </c-col>

      <c-col md="6">
        <h5>Previously Generated</h5>

        <div class="d-flex flex-row overflow-auto py-2" style="gap: 1rem; min-height: 250px;">

          <img src="https://png.pngtree.com/png-clipart/20230620/ourlarge/pngtree-coupon-code-vector-png-image_7305291.png" alt="Previously generated 1"
            class="rounded border p-1" style="cursor: pointer; max-width: 250px;">

          <img src="https://png.pngtree.com/png-clipart/20230620/ourlarge/pngtree-coupon-code-vector-png-image_7305291.png" alt="Previously generated 2"
            class="rounded p-1"style="cursor: pointer; max-width: 250px;">

          <img src="https://png.pngtree.com/png-clipart/20230620/ourlarge/pngtree-coupon-code-vector-png-image_7305291.png" alt="Previously generated 3"
            class="rounded border p-1" style="cursor: pointer; max-width: 250px;">

          <img src="https://png.pngtree.com/png-clipart/20230620/ourlarge/pngtree-coupon-code-vector-png-image_7305291.png" alt="Previously generated 4"
            class="rounded border p-1" style="cursor: pointer; max-width: 250px;">

        </div>
      </c-col>

    </c-row>

  </c-modal-body>

  <c-modal-footer>
    <button [cModalToggle]="aiImageModal.id" cButton color="secondary">
      Close
    </button>
    <button cButton color="primary" (click)="submitGeneratedImage()">Use This Image</button>
  </c-modal-footer>
</c-modal>